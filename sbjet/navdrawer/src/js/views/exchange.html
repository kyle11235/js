<!--
 Copyright (c) 2014, 2017, Oracle and/or its affiliates.
 The Universal Permissive License (UPL), Version 1.0
 -->
<div class="">

    <!-- tool bar -->
    <div class="tool_bar">
        <div class="oj-flex-bar white">
            <div class="oj-flex-bar-start">
                <oj-toolbar>
                    <oj-button data-bind="click: function(){history.back();}">
                        <span slot='startIcon' class='oj-fwk-icon-caret-start oj-fwk-icon'></span>
                    </oj-button>
                    <span class="title">积分兑换</span>
                </oj-toolbar>
            </div>
        </div>
    </div>

    <!-- points -->
    <div class="oj-flex oj-sm-align-items-center points-top-section">
        <div class="oj-flex-item">
            <h1 class="points-name" data-bind="text: session.pointsOffChain"></h1>
            <div class="points-title oj-text-sm">链下积分</div>
        </div>
        <div class="oj-flex-item">
            <h1 class="points-name" data-bind="text: session.pointsOnChain"></h1>
            <div class="points-title oj-text-sm">链上积分</div>
        </div>
    </div>

    <!-- form -->
    <div class="form">
        <div class="oj-flex oj-sm-align-items-center ">
            <div class="oj-flex-item label">
                请选择积分兑换类型
            </div>
            <div class="oj-flex-item">
                <oj-select-one id="basicSelect" value="{{target}}" style="max-width:20em">
                    <!-- ko foreach: session.data.apps -->
                    <oj-option value="[[$data]]"><span data-bind="text: name"></span></oj-option>
                    <!-- /ko -->
                </oj-select-one>
            </div>
        </div>
        <div class="mt10 label">
            <span data-bind="text: target().name"></span>积分
        </div>
        <div class="mt10 label" style="color:#C9C9C9">
            兑换比例 <span data-bind="text: ratio"></span>
        </div>

        <oj-input-text class="mt10 text" style="max-width:100%;border-top:none;" placeholder="{{placeholder}}"
                       value="{{points}}"
                       raw-value="{{points}}"
        ></oj-input-text>

        <div class="mt10" style="color:red;" data-bind="text: warning"/>

        <div class="mt10 center" data-bind="if: disabled">
            <span class="myGreyButton" style="width: 100%;">确认</span>
        </div>
        <div class="mt10 center" data-bind="ifnot: disabled">
            <span class="myBlueButton" style="width: 100%;" data-bind="click: submit1">确认</span>
        </div>
    </div>

    <!-- popup -->
    <oj-popup class="myPopup" id="popup" style="padding: 20px 10px; width: 80%;"
              tail="none"
              position.my.horizontal="center"
              position.my.vertical="center"
              position.at.horizontal="center"
              position.at.vertical="center"
              modality="modal">

        <!-- message -->
        <div data-bind="visible: showMe(2)" class="center">
            <div>您已成功兑换 <span data-bind="text: targetPoints"></span> <span data-bind="text: target().name"></span> 积分!</div>
            <div class="oj-flex center" style="margin-top:30px; ">
                <div class="oj-flex-item">
                    <span class="myBlueButton" style="width:80%" data-bind="click: close">好的</span>
                </div>
            </div>
        </div>

    </oj-popup>


</div>